!function(n){"object"==typeof exports?module.exports=n():"function"==typeof define&&define.amd?define(n):ENTITY_WHARF=n()}(function(){var n="$:?:$",t=function(t){return"object"==typeof t?n+"object":"function"==typeof t?n+"function":t},e=function(n){return!!n&&"object"==typeof n&&n.constructor===Object},r=Object.keys,o=function(n,t){return n.hasOwnProperty(t)},u=function(n,t,e){o(n,t)||(n[t]={}),n[t][e]=!0},f=function(n,t,e){o(n,t)&&delete n[t][e]};return function(){var n=function(){var n=0;return function(){return n++,n+""}}(),c={},i={},a={},d=function(n){return o(c,n)},h=function(n,o){return d(n)&&e(o)?(r(o).forEach(function(e){var r=o[e];c[n][e]=r,u(i,e,n),u(a,t(r),n)}),!0):!1};return{get:function(n){return d(n)?c[n]:null},add:function(t){var e=n();return c[e]={},h(e,t)?e:(delete c[e],!1)},set:h,remove:function(n){return d(n)?(r(c[n]).forEach(function(e){f(i,e,n),f(a,t(c[n][e]),n)}),delete c[n],!0):!1},q:function(n){if(!e(n))return r(c);var u=n.e||[],f=n.a||[],d=n.v||[],h=[u];f.forEach(function(n){h.push(r(i[n]||{}))}),d.forEach(function(n){h.push(r(a[t(n)]||{}))});var p=0,v={};return h.forEach(function(n){0!==n.length&&(p++,n.forEach(function(n){o(v,n)||(v[n]=0),v[n]++}))}),r(v).filter(function(n){return v[n]===p})}}}});